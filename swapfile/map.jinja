{% set swapfile = '/swapfile' %}
{% set size = '1024' %}
{% set conf = salt['grains.filter_by']({
    'Debian':  {'swapfile': swapfile,
                'name': 'fallocate -l '+size+'MB '+swapfile+' && chmod 0600 ' + swapfile + ' && mkswap '+swapfile,
                'fstab': swapfile + ' none swap defaults 0 0',
                },
    'FreeBSD': {'swapfile': swapfile,
                'name': 'dd if=/dev/zero of=' + swapfile + ' bs=1m count='+size+' && chmod 0600 ' + swapfile + ' && swapon -aL',
                'fstab': 'md99 none  swap  sw,file='+swapfile+',late  0 0',
                },
}, grain='os_family', merge=salt['pillar.get']('swapfile:lookup')) %}
